{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "AWS CloudFormation Template EC2_Instancetance in an existing VPC.",
    "Parameters": {
        "VpcId": {
            "Type": "String",
            "Default": "vpc-fced2c84",
            "Description": "VpcId of your existing Virtual Private Cloud (VPC)"
        },
        "SubnetId": {
            "Type": "String",
            "Default": "subnet-00f953beb0966e343",
            "Description": "SubnetId of an existing subnet in your Virtual Private Cloud (VPC)"
        }
    },
    "Resources": {
        "Ec2Instance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "InstanceType": "t2.micro",
                "ImageId": "ami-0eed72b8c9bda1448",
                "NetworkInterfaces": [
                    {
                        "DeviceIndex": "0",
                        "AssociatePublicIpAddress": "true",
                        "DeleteOnTermination": "true",
                        "SubnetId": {
                            "Ref": "SubnetId"
                        }
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": "test-jenkins-demo-swapnil"
                    }
                ],
                "UserData": {
                    "Fn::Base64": {
                        "Fn::Sub": "#!/bin/bash\nyum update -y\nyum install -y httpd\nchkconfig httpd on\nservice httpd start\necho \"Success!!!\" > /var/www/html/index.html\n#tomcat installation\ncurl -O https://downloads.apache.org/tomcat/tomcat-8/v8.5.57/bin/apache-tomcat-8.5.57.tar.gz\ntar xvfz apache*.tar.gz\nmv apache-tomcat-8.5.57/* /opt/tomcat/.\napt install java\njava -version\n"
                    }
                }
            }
        }
    },
    "Outputs": {
        "InstanceId": {
            "Value": {
                "Ref": "Ec2Instance"
            },
            "Description": "Instance Id of newly created instance"
        }
    }
}
